# Этап 1: Подготовка и анализ - ЗАВЕРШЕН ✅

## Выполненные задачи

### 1.1 Настройка окружения ✅
- [x] Клонирован репозиторий `aleksandrov-dima/Dataminer`
- [x] Изучена структура исходного проекта OnPage-Scraper
- [x] Проверена структура проекта:
  - Backend (Node.js + Express + MongoDB) - будет удален
  - Extension (Chrome Extension Manifest V3) - основная часть
- [x] Создана ветка для разработки (`feature/dataminer-simplification`)

### 1.2 Анализ кодовой базы ✅
- [x] Составлена карта функциональности OnPage-Scraper:
  - Список всех компонентов UI
  - Список всех функций/сервисов
  - Зависимости и связи между модулями
- [x] Определены компоненты для удаления:
  - Авторизация и аутентификация (AuthService, формы входа/регистрации)
  - Облачное хранение данных (ReportService, reports.html)
  - Серверная часть (backend/)
  - Настройки и профили (Settings page)
  - Сохранённые проекты (Reports page)
  - История действий (Workflow UI)
  - Пагинация и infinite scroll (auto-scroll в ScrapingService)
  - Сценарии и workflows
  - Дополнительные опции (container selector, deep scan, structured data)
- [x] Определены компоненты для сохранения:
  - Визуальный выбор DOM-элементов (hover highlight) - content.js
  - Извлечение данных из DOM - ScrapingService.js (упростить)
  - Формирование таблицы результатов - popup.js (упростить)
  - Экспорт данных - CSVUtils.js, JSONUtils.js

## Результаты анализа

### Структура проекта
```
Dataminer/
├── backend/              # УДАЛИТЬ полностью
│   ├── config/
│   ├── controllers/
│   ├── middleware/
│   ├── models/
│   ├── routes/
│   └── server.js
└── extension/            # УПРОСТИТЬ
    ├── manifest.json
    ├── popup.html/js/css
    ├── content.js/css
    ├── background.js
    ├── reports.html/js/css  # УДАЛИТЬ
    ├── services/
    │   ├── AuthService.js      # УДАЛИТЬ
    │   ├── ReportService.js     # УДАЛИТЬ
    │   ├── ScrapingService.js   # УПРОСТИТЬ
    │   └── ToastService.js       # СОХРАНИТЬ
    └── utils/
        ├── CSVUtils.js          # СОХРАНИТЬ
        └── JSONUtils.js         # СОХРАНИТЬ
```

### Компоненты для удаления (детально)

1. **Авторизация**:
   - `extension/services/AuthService.js`
   - Формы входа/регистрации в `popup.html`
   - Все проверки авторизации в `popup.js`

2. **Backend и облачное хранение**:
   - Вся папка `backend/`
   - `extension/services/ReportService.js`
   - `extension/reports.html/js/css`
   - Chunked upload логика

3. **Настройки**:
   - Settings page в `popup.html`
   - `handleSettingsSave()`, `loadUserSettings()` в `popup.js`

4. **Дополнительные функции**:
   - Container selector
   - Ручной ввод селекторов
   - Примеры селекторов
   - Deep scan (iframes/shadow DOM)
   - Structured data extraction
   - Auto-scroll и infinite scroll

### Компоненты для сохранения

1. **Визуальный выбор элементов** (`content.js`):
   - Класс `OnPageContentScript`
   - Методы `highlightElement()`, `selectElement()`
   - Генерация селекторов `generateSelector()`
   - UI для выбора (overlay, инструкции)

2. **Извлечение данных** (`ScrapingService.js`):
   - Базовая логика поиска элементов
   - Извлечение textContent, href, src
   - ⚠️ Убрать auto-scroll, container selector, deep scan

3. **Экспорт данных**:
   - `CSVUtils.js` - экспорт в CSV
   - `JSONUtils.js` - экспорт в JSON

## Документация

Создан файл `АНАЛИЗ_КОДОВОЙ_БАЗЫ.md` с детальным анализом:
- Карта функциональности
- Список компонентов для удаления
- Список компонентов для сохранения
- Зависимости между модулями
- План упрощения UI

## Следующий этап

**Этап 2: Удаление лишнего функционала (2-3 дня)**

Начать удаление:
1. Backend и облачных функций
2. Системы авторизации
3. Дополнительных функций UI
4. Очистка зависимостей

---

**Статус:** ✅ Этап 1 завершен
**Дата:** 16.12.2025
**Ветка:** `feature/dataminer-simplification`

